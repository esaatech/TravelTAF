{% load static %}

<!-- Chat Widget Button -->
<div class="chat-widget">
    <button id="chatToggle" 
            class="bg-[#1980e6] text-white px-6 py-3 rounded-full hover:bg-blue-700 flex items-center gap-2 shadow-lg">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256">
            <path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm16-40a8,8,0,0,1-8,8,16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40A8,8,0,0,1,144,176ZM112,84a12,12,0,1,1,12,12A12,12,0,0,1,112,84Z"></path>
        </svg>
        <span>Chat with Agent</span>
    </button>
</div>

<!-- Chat Popup -->
<div id="chatPopup" class="chat-popup">
    <div class="w-full h-full flex flex-col rounded-lg overflow-hidden">
        <!-- Header - Modified to include call icon -->
        <div class="bg-white border-b px-4 py-3 flex justify-between items-center">
            <h1 class="text-lg font-bold">TravelTAF AI Agent</h1>
            <div class="flex items-center gap-3">
                <!-- Call Button -->
                <button id="callButton" 
                        class="text-gray-500 hover:text-green-600 transition-colors relative group">
                    <span class="invisible group-hover:visible absolute bottom-full left-1/2 transform -translate-x-1/2 
                                 bg-gray-800 text-white text-xs rounded py-1 px-2 mb-2 whitespace-nowrap z-50
                                 before:content-[''] before:absolute before:top-full before:left-1/2 
                                 before:-translate-x-1/2 before:border-4 before:border-transparent 
                                 before:border-t-gray-800">
                        Start a call
                    </span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 256 256">
                        <path d="M222.37,158.46l-47.11-21.11-.13-.06a16,16,0,0,0-15.17,1.4,8.12,8.12,0,0,0-.75.56L134.87,160c-15.42-7.49-31.34-23.29-38.83-38.51l20.78-24.71c.2-.25.39-.5.57-.77a16,16,0,0,0,1.32-15.06l0-.12L97.54,33.64a16,16,0,0,0-16.62-9.52A56.26,56.26,0,0,0,32,80c0,79.4,64.6,144,144,144a56.26,56.26,0,0,0,55.88-48.92A16,16,0,0,0,222.37,158.46ZM176,208A128.14,128.14,0,0,1,48,80,40.2,40.2,0,0,1,82.87,40a.61.61,0,0,0,0,.12l21,47L83.2,111.86a6.13,6.13,0,0,0-.57.77,16,16,0,0,0-1,15.7c9.06,18.53,27.73,37.06,46.46,46.11a16,16,0,0,0,15.75-1.14,8.44,8.44,0,0,0,.74-.56L168.89,152l47,21.05h0A40.21,40.21,0,0,1,176,208Z"></path>
                    </svg>
                </button>
                <!-- Close Button -->
                <button id="chatClose" class="text-gray-500 hover:text-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 256 256">
                        <path d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Messages -->
        <div id="chatMessages" class="flex-1 overflow-y-auto p-4 bg-gray-50 scroll-smooth">
            <!-- Initial bot message -->
            <div class="flex gap-4 max-w-2xl mb-4">
                <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#1980e6" viewBox="0 0 256 256">
                        <path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm16-40a8,8,0,0,1-8,8,16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40A8,8,0,0,1,144,176ZM112,84a12,12,0,1,1,12,12A12,12,0,0,1,112,84Z"></path>
                    </svg>
                </div>
                <div class="flex-1">
                    <p class="bg-gray-100 p-4 rounded-lg inline-block">Hello! I'm your AI assistant. How can I help you today?</p>
                    
                    <!-- Common Questions -->
                    <div class="mt-4 space-y-2">
                        <p class="text-sm text-gray-500 mb-2">Common questions:</p>
                        <button class="common-question block text-left text-sm text-blue-600 hover:text-blue-800 hover:underline p-1 rounded transition-colors">
                            What are the basic requirements for a work visa?
                        </button>
                        <button class="common-question block text-left text-sm text-blue-600 hover:text-blue-800 hover:underline p-1 rounded transition-colors">
                            How long does the immigration process typically take?
                        </button>
                        <button class="common-question block text-left text-sm text-blue-600 hover:text-blue-800 hover:underline p-1 rounded transition-colors">
                            What documents do I need for a student visa?
                        </button>
                        <button class="common-question block text-left text-sm text-blue-600 hover:text-blue-800 hover:underline p-1 rounded transition-colors">
                            Which countries have the easiest immigration policies?
                        </button>
                        <button class="common-question block text-left text-sm text-blue-600 hover:text-blue-800 hover:underline p-1 rounded transition-colors">
                            How can I apply for permanent residency?
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Chat messages will be appended here -->
            <div id="chatMessages"></div>
        </div>

        <!-- Input area - Add id to input -->
        <div class="border-t bg-white p-4">
            <div class="flex gap-2">
                <input type="text" 
                       id="chatInput"
                       placeholder="Type your message..." 
                       class="flex-1 px-4 py-2 border rounded-l-lg focus:outline-none focus:border-blue-500">
                <button id="sendMessage" class="bg-[#1980e6] text-white px-4 py-2 rounded-r-lg hover:bg-blue-700">
                    Send
                </button>
            </div>
        </div>
    </div>
</div> 