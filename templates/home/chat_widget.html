{% load static %}

<!-- Chat Widget Button -->
<div class="chat-widget">
    <button id="chatToggle" 
            class="bg-[#1980e6] text-white px-6 py-3 rounded-full hover:bg-blue-700 flex items-center gap-2 shadow-lg">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256">
            <path d="M216,48H40A16,16,0,0,0,24,64V224a15.84,15.84,0,0,0,9.25,14.5A16.05,16.05,0,0,0,40,240a15.89,15.89,0,0,0,10.25-3.78.69.69,0,0,0,.13-.11L82.5,208H216a16,16,0,0,0,16-16V64A16,16,0,0,0,216,48ZM216,192H82.5a16,16,0,0,0-10.3,3.75l-.12.11L40,224V64H216V192Z"></path>
        </svg>
        <span>Chat with Agent</span>
    </button>
</div>

<!-- Chat Popup -->
<div id="chatPopup" class="chat-popup">
    <div class="w-full h-full flex flex-col rounded-lg overflow-hidden">
        <!-- Header - Removed call button -->
        <div class="bg-white border-b px-4 py-3 flex justify-between items-center">
            <h1 class="text-lg font-bold">TravelTAF AI Agent</h1>
            <div class="flex items-center gap-3">
                <!-- Close Button -->
                <button id="chatClose" class="text-gray-500 hover:text-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 256 256">
                        <path d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Messages -->
        <div id="chatMessages" class="flex-1 overflow-y-auto p-4 bg-gray-50 scroll-smooth">
            <!-- Initial bot message -->
            <div class="flex gap-4 max-w-2xl mb-4">
                <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#1980e6" viewBox="0 0 256 256">
                        <path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm16-40a8,8,0,0,1-8,8,16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40A8,8,0,0,1,144,176ZM112,84a12,12,0,1,1,12,12A12,12,0,0,1,112,84Z"></path>
                    </svg>
                </div>
                <div class="flex-1">
                    <p class="bg-gray-100 p-4 rounded-lg inline-block">Hello! I'm your AI assistant. How can I help you today?</p>
                    
                    <!-- Common Questions -->
                    <div class="mt-4 space-y-2">
                        <p class="text-sm text-gray-500 mb-2">Common questions:</p>
                        <button class="common-question block text-left text-sm text-blue-600 hover:text-blue-800 hover:underline p-1 rounded transition-colors">
                            What are the basic requirements for a work visa?
                        </button>
                        <button class="common-question block text-left text-sm text-blue-600 hover:text-blue-800 hover:underline p-1 rounded transition-colors">
                            How long does the immigration process typically take?
                        </button>
                        <button class="common-question block text-left text-sm text-blue-600 hover:text-blue-800 hover:underline p-1 rounded transition-colors">
                            What documents do I need for a student visa?
                        </button>
                        <button class="common-question block text-left text-sm text-blue-600 hover:text-blue-800 hover:underline p-1 rounded transition-colors">
                            Which countries have the easiest immigration policies?
                        </button>
                        <button class="common-question block text-left text-sm text-blue-600 hover:text-blue-800 hover:underline p-1 rounded transition-colors">
                            How can I apply for permanent residency?
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Chat messages will be appended here -->
            <div id="chatMessages"></div>
        </div>

        <!-- Input area - Add id to input -->
        <div class="border-t bg-white p-4">
            <div class="flex gap-2">
                <input type="text" 
                       id="chatInput"
                       placeholder="Type your message..." 
                       class="flex-1 px-4 py-2 border rounded-l-lg focus:outline-none focus:border-blue-500">
                <button id="sendMessage" class="bg-[#1980e6] text-white px-4 py-2 rounded-r-lg hover:bg-blue-700">
                    Send
                </button>
            </div>
        </div>
    </div>
</div> 